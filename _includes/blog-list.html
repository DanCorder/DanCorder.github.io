<div class='blog-list'>
  <h2>Posts</h2>
  <ul class='blog-list__posts'>
    {% assign first_year = true %}
    {% for post in site.categories.blog %}
      {% assign current_year = post.date | date: "%Y" %}
      {% if current_year != year %}
        {% assign first_month = true %}
        {% assign month = "" %}
        {% if first_year %}
          {% assign first_year = false %}
        {% else %}
          </ul>
        </li>
      </ul>
    </li>
        {% endif %}
    <li>{{ current_year }}
      <ul class='blog-list__year'>
        {% assign year = current_year %} 
      {% endif %}
      {% assign current_month = post.date | date: "%B" %}

      {% if current_month != month %}
        {% if first_month %}
          {% assign first_month = false %}
        {% else %}
          </ul>
        </li>
        {% endif %}
        <li>{{ current_month }}
          <ul class='blog-list__month'>
        {% assign month = current_month %} 
      {% endif %}
            <li><a href="{{ post.url }}">{{ post.title }}</a></li>
    {% endfor %}
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</div>
